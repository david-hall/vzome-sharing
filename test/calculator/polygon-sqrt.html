<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Square Roots in Polygon Fields</title>
    <link rel='shortcut icon' type='image/x-icon' href='/vzome-sharing/favicon.ico'>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link rel='stylesheet' type='text/css' media='screen' href='polygon-sqrt.css'>
    <script type='module' src='polygon-sqrt.js'></script>
    <script>
function onRadicandChange() {
	const radicandInput = document.getElementById("radicand");
    radicandInput.disabled = true; // avoid rendering multiple changes when calc is slow
	const r = parseInt(radicandInput.value);
    if(r>=2 && r<=40) {
        const calc = document.getElementById("calc");
        calc.radicand = r;
    }
    if(calc.radicand != r) {
        // sync the input to the last valid value
        radicandInput.value = calc.radicand;
    }
    radicandInput.disabled = false;
}

window.addEventListener("load", () => {
    const radicandInput = document.getElementById("radicand");
    const r = parseInt((new URL(document.location)).searchParams.get("r"));
    if(r>=2 && r<=40) {
        radicandInput.value = r;
        onRadicandChange();
    } else {
        // sync the input with any specified attribute of calc
        radicandInput.value = calc.radicand;
    }
    radicandInput.focus();
});
    </script>
</head>
<body>
    <math display="block">
        <mrow>
            <msqrt><mi>R</mi></msqrt><mo>=</mo>
            <munderover>
                <mo movablelimits="false">∏</mo>
                <mrow>
                    <mi>&Kappa;</mi>
                    <mo>=</mo>
                    <mn>1</mn>
                </mrow>
                <mrow>
                    <mo fence="true" form="prefix">⌊</mo>
                    <mfrac>
                        <mi>R</mi>
                        <mn>2</mn>
                    </mfrac>
                    <mo fence="true" form="postfix">⌋</mo>
                </mrow>
            </munderover>
        </mrow>
        <mfrac>
            <mrow>
                <mi>s</mi>
                <mi>i</mi>
                <mi>n</mi>
                <mo>(</mo>
                <mfrac>
                <mrow>
                    <mo>(</mo>
                        <mn>2</mn>
                        <mi>&Kappa;</mi>
                        <mo>-</mo>
                        <mn>0</mn>
                        <mo>)</mo>
                    <mi>π</mi>
                </mrow>
                <mrow>
                    <mn>2</mn>
                    <mi>R</mi>
                </mrow>
                </mfrac>
                <mo>)</mo>
            </mrow>
            <mrow>
                <mi>s</mi>
                <mi>i</mi>
                <mi>n</mi>
                <mo>(</mo>
                <mfrac>
                    <mrow>
                        <mo>(</mo>
                        <mn>2</mn>
                        <mi>&Kappa;</mi>
                        <mo>-</mo>
                        <mn>1</mn>
                        <mo>)</mo>
                        <mi>π</mi>
                    </mrow>
                    <mrow>
                        <mn>2</mn>
                        <mi>R</mi>
                    </mrow>
                </mfrac>
                <mo>)</mo>
            </mrow>
        </mfrac>
    </math>
    <br>
    <math display="block">
        <mrow>
            <mi>R</mi><mo>≥</mo><mn>2</mn><mtext>,&nbsp;</mtext>
            <mi>R</mi><mo>∈</mo><mtext>&Nopf;&nbsp;</mtext>
        <mrow>
    </math>
    <br>
    <math display="block">
        <mtext>Solve for&nbsp;</mtext>
        <mi>R</mi>
        <mo>=</mo>
        <mtext>
            <input id="radicand" type="number" min="2" max="40" onchange="onRadicandChange()">
        </mtext>
        <mtext>&nbsp;(Limited to 40)</mtext>
    </math>
    <hr>
    <sqrt-calculator id="calc"></sqrt-calculator>
</body>
</html>