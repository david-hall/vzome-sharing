---
title: Klein Quartic with Integer Vertices
description: A vZome bug report. (Part 1 of 2)
image: https://david-hall.github.io/vzome-sharing/2021/12/09/15-39-34-KleinMinInteger/KleinMinInteger.png
layout: vzome
---
__A Klein quartic with all vertices having integer coordinates.__

{% comment %}
 - [***web page generated from this source***][post]
 - [data assets and more info][github]

[post]: <https://david-hall.github.io/vzome-sharing/2021/12/09/KleinMinInteger-15-39-34.html>
[github]: <https://github.com/david-hall/vzome-sharing/tree/main/2021/12/09/15-39-34-KleinMinInteger/>
{% endcomment %}

The current vZome desktop (7.81) and online viewer (version 52) do not render non-convex panels correctly as in the first model below. The much older vZome desktop (version 6) does render them correctly.

A second problem shows up in the second model shown below when it's viewed in the desktop app or the online debugger. The final built-in `tetrahedral symmetry` tool does not copy the panel colors as it should. I suspect that it's because the model was made with desktop version 7.66 
before the `copyColors` property was added, but the newer versions of vZome desktop and the online debugger incorrectly default to `copyColors="false"` for the built-in tools when the property isn't found. 

Another oddity is that when the orange panel has the `tetrahedral symmetry` tool applied, the resulting panels are neither orange as they should be, nor white as would be the case for an automatic direction. Instead, it seems to be a light tan color. I have no idea where that would originate. At least the copies of the green panel show up as white which would be expected if `copyColors="false"` since its normal is an automatic direction.
The model renders correctly in the embedded viewer below because it uses the shapes.json file which contains the correct original colors since it was generated by the same earlier version of desktop.

The problem initially reported regarding non-convex panels occurs because of the way vZome 7 slices panels into triangles for rendering. It presumes that panels are always convex, but that's not always true. 
It's usually true and the assumption allows for more efficient code for slicing of the panel into triangles as long as the assumption really is true, 
but for the occasional non-convex cases the obvious side effect is that the panel can render some unexpected artifacts which extend beyond its intended outline as seen here. (The faces on the second model are shown with the correct shapes.)

<vzome-viewer style="width: 100%; height: 65vh;"
       src="https://david-hall.github.io/vzome-sharing/2021/12/09/15-39-34-KleinMinInteger/KleinMinInteger.vZome" >
  <img src="https://david-hall.github.io/vzome-sharing/2021/12/09/15-39-34-KleinMinInteger/KleinMinInteger.png" />
</vzome-viewer>

The recommended solution is to replace every individual non-convex panel with multiple convex panels as in the second model below. While this avoids the problem with the artifacts, it introduces two new problems for the model's author. 

First of all, the outline of the panel is intended to surround only the original non-convex panel, not each of the constituent convex panels. This issue only shows up in desktop since online doesn't render outlines at all. 

Secondly, the original non-convex panel normally constitutes an entire single facet of the polyhedron. 
By modeling it from discreet convex panels, they need to be individually selected to manipulate them, or else grouped, which is an additional step that pushes unnecessary complexity to the model's author 
when vZome core should be able to handle non-convex panels.

<vzome-viewer style="width: 100%; height: 65vh;"
       src="https://david-hall.github.io/vzome-sharing/2021/12/09/15-40-32-KleinMinInteger-ConvexPanels/KleinMinInteger-ConvexPanels.vZome" >
  <img src="https://david-hall.github.io/vzome-sharing/2021/12/09/15-40-32-KleinMinInteger-ConvexPanels/KleinMinInteger-ConvexPanels.png" />
</vzome-viewer>

